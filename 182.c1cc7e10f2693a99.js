"use strict";(self.webpackChunkmy_finance_front=self.webpackChunkmy_finance_front||[]).push([[182],{1182:(I,m,s)=>{s.r(m),s.d(m,{TipoCartaoModule:()=>j});var p=s(177),n=s(4341),u=s(9032),d=s(467),t=s(540),f=s(5403);function h(e,l){1&e&&(t.j41(0,"div",15),t.EFF(1," Informe um nome v\xe1lido (m\xednimo 2 caracteres). "),t.k0s())}let C=(()=>{class e{constructor(o,a){this.fb=o,this.service=a,this.item=null,this.closed=new t.bkB,this.saving=!1,this.form=this.fb.group({nomeTipoCartao:["",[n.k0.required,n.k0.minLength(2)]]})}ngOnInit(){this.item&&this.form.patchValue({nomeTipoCartao:this.item.nomeTipoCartao})}close(o=!1){this.closed.emit(o)}save(){var o=this;return(0,d.A)(function*(){if(o.form.invalid)o.form.markAllAsTouched();else try{o.saving=!0;const a={id:o.item?.id,nomeTipoCartao:o.form.value.nomeTipoCartao};o.item?yield o.service.update(a):yield o.service.create(a),o.close(!0)}catch{alert("Erro ao salvar banco.")}finally{o.saving=!1}})()}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(n.ok),t.rXU(f.g))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-tipo-cartao-form"]],inputs:{item:"item"},outputs:{closed:"closed"},decls:19,vars:7,consts:[[1,"modal-backdrop","fade","show",3,"click"],["tabindex","-1","role","dialog","aria-modal","true",1,"modal","modal-blur","fade","show","d-block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",3,"formGroup"],[1,"mb-3"],[1,"form-label"],["formControlName","nomeTipoCartao",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","me-auto",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"invalid-feedback"]],template:function(a,i){1&a&&(t.j41(0,"div",0),t.bIt("click",function(){return i.close(!1)}),t.k0s(),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),t.EFF(6),t.k0s(),t.j41(7,"button",6),t.bIt("click",function(){return i.close(!1)}),t.k0s()(),t.j41(8,"div",7)(9,"div",8)(10,"label",9),t.EFF(11,"Nome do Tipo Cart\xe3o"),t.k0s(),t.nrm(12,"input",10),t.DNE(13,h,2,0,"div",11),t.k0s()(),t.j41(14,"div",12)(15,"button",13),t.bIt("click",function(){return i.close(!1)}),t.EFF(16,"Cancelar"),t.k0s(),t.j41(17,"button",14),t.bIt("click",function(){return i.save()}),t.EFF(18),t.k0s()()()()()),2&a&&(t.R7$(6),t.JRh(i.item?"Editar Tipo Cart\xe3o":"Novo Tipo Cart\xe3o"),t.R7$(2),t.Y8G("formGroup",i.form),t.R7$(4),t.AVh("is-invalid",i.form.controls.nomeTipoCartao.touched&&i.form.controls.nomeTipoCartao.invalid),t.R7$(1),t.Y8G("ngIf",i.form.controls.nomeTipoCartao.touched&&i.form.controls.nomeTipoCartao.invalid),t.R7$(4),t.Y8G("disabled",i.saving),t.R7$(1),t.SpI(" ",i.saving?"Salvando...":"Salvar"," "))},dependencies:[p.bT,n.me,n.BC,n.cb,n.j4,n.JD]})}}return e})();function _(e,l){if(1&e&&(t.j41(0,"div",34),t.EFF(1),t.k0s()),2&e){const o=t.XpG();t.AVh("alert-success","success"===o.alert.type)("alert-danger","error"===o.alert.type),t.R7$(1),t.SpI(" ",o.alert.message," ")}}function v(e,l){if(1&e){const o=t.RV6();t.j41(0,"tr")(1,"td",35),t.EFF(2),t.k0s(),t.j41(3,"td",36),t.EFF(4),t.k0s(),t.j41(5,"td",37)(6,"div",38)(7,"button",39),t.bIt("click",function(){const r=t.eBV(o).$implicit,c=t.XpG();return t.Njj(c.openUpdate(r))}),t.EFF(8," \u270f\ufe0f "),t.k0s(),t.j41(9,"button",40),t.bIt("click",function(){const r=t.eBV(o).$implicit,c=t.XpG();return t.Njj(c.onDelete(r))}),t.EFF(10," \u{1f5d1}\ufe0f "),t.k0s()()()()}if(2&e){const o=l.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.nomeTipoCartao)}}function F(e,l){1&e&&(t.j41(0,"tr")(1,"td",41),t.EFF(2," Nenhum tipo de cart\xe3o encontrado. "),t.k0s()())}function b(e,l){1&e&&(t.j41(0,"tr")(1,"td",41),t.EFF(2,"Carregando..."),t.k0s()())}function g(e,l){if(1&e&&(t.j41(0,"tr")(1,"td",42),t.EFF(2),t.k0s()()),2&e){const o=t.XpG();t.R7$(2),t.JRh(o.errorMsg)}}function T(e,l){if(1&e){const o=t.RV6();t.j41(0,"app-tipo-cartao-form",43),t.bIt("closed",function(i){t.eBV(o);const r=t.XpG();return t.Njj(r.closeCreate(i))}),t.k0s()}2&e&&t.Y8G("item",null)}function k(e,l){if(1&e){const o=t.RV6();t.j41(0,"app-tipo-cartao-form",43),t.bIt("closed",function(i){t.eBV(o);const r=t.XpG();return t.Njj(r.closeUpdate(i))}),t.k0s()}if(2&e){const o=t.XpG();t.Y8G("item",o.editing)}}const y=[{path:"",component:(()=>{class e{constructor(o){this.service=o,this.tipoCartao=[],this.filtered=[],this.loading=!1,this.errorMsg="",this.q="",this.statusFilter="ALL",this.alert={type:"",message:""},this.showModalCreate=!1,this.showModalUpdate=!1,this.editing=null}ngOnInit(){var o=this;return(0,d.A)(function*(){yield o.load()})()}load(){var o=this;return(0,d.A)(function*(){try{o.loading=!0,o.errorMsg="",o.tipoCartao=(yield o.service.list())??[],o.applyFilters()}catch(a){o.errorMsg=a?.message??"Erro ao carregar tipos de cart\xe3o."}finally{o.loading=!1}})()}applyFilters(){const o=this.q.trim().toLowerCase();this.filtered=[...this.tipoCartao].filter(a=>!o||(a.nomeTipoCartao??"").toLowerCase().includes(o)||String(a.id).includes(o))}onSearchChange(o){this.q=o,this.applyFilters()}onStatusChange(o){this.statusFilter=o,this.applyFilters()}openCreate(){this.editing=null,this.showModalCreate=!0}openUpdate(o){this.editing=o,this.showModalUpdate=!0}closeCreate(o){this.showModalCreate=!1,o&&this.load()}closeUpdate(o){this.showModalUpdate=!1,this.editing=null,o&&this.load()}onDelete(o){var a=this;return(0,d.A)(function*(){if(window.confirm(`Excluir o tipo de cart\xe3o "${o.nomeTipoCartao}"?`))try{yield a.service.delete(o.id),a.alert={type:"success",message:"Tipo de cart\xe3o deletado com sucesso!"},setTimeout(()=>a.alert={type:"",message:""},3e3),yield a.load()}catch{a.alert={type:"error",message:"Falha ao deletar. Pode estar vinculado a transa\xe7\xf5es."},setTimeout(()=>a.alert={type:"",message:""},12e3)}})()}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(f.g))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-tipo-cartao-list"]],decls:53,vars:11,consts:[[1,"container-xl","py-3"],["class","alert",3,"alert-success","alert-danger",4,"ngIf"],[1,"page-header","d-print-none","mb-3"],[1,"row","align-items-center"],[1,"col"],[1,"page-pretitle"],[1,"page-title"],[1,"col-auto","ms-auto","d-print-none"],[1,"btn-list"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card","mb-3"],[1,"card-body"],[1,"row","g-2","align-items-end"],[1,"col-12","col-md-6"],[1,"form-label"],["placeholder","Nome ou ID",1,"form-control",3,"value","input"],[1,"col-12","col-md-3"],[1,"form-select",3,"value","change"],["value","ALL"],["value","Ativo"],["value","Inativo"],[1,"col-12","col-md-3","d-flex","justify-content-md-end"],[1,"text-muted","small","mt-3","mt-md-0"],[1,"card"],[1,"table-responsive"],[1,"table","card-table","table-vcenter","table-hover"],[1,"bg-body-tertiary"],[1,"w-1"],[1,"text-nowrap"],[1,"w-1","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"item","closed",4,"ngIf"],[1,"alert"],[1,"text-muted"],[1,"fw-medium"],[1,"text-center"],[1,"btn-list","d-inline-flex"],["type","button","title","Editar",1,"btn","btn-icon","btn-soft-secondary",3,"click"],["type","button","title","Excluir",1,"btn","btn-icon","btn-soft-danger",3,"click"],["colspan","3",1,"text-center","text-secondary","py-4"],["colspan","3",1,"text-center","text-danger","py-4"],[3,"item","closed"]],template:function(a,i){1&a&&(t.j41(0,"div",0),t.DNE(1,_,2,5,"div",1),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.EFF(6,"Cadastros"),t.k0s(),t.j41(7,"h2",6),t.EFF(8,"Tipo Cart\xe3o"),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"button",9),t.bIt("click",function(){return i.load()}),t.EFF(12," Atualizar "),t.k0s(),t.j41(13,"button",10),t.bIt("click",function(){return i.openCreate()}),t.EFF(14," + Novo Tipo Cart\xe3o "),t.k0s()()()()(),t.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"label",15),t.EFF(20,"Buscar"),t.k0s(),t.j41(21,"input",16),t.bIt("input",function(c){return i.onSearchChange(c.target.value)}),t.k0s()(),t.j41(22,"div",17)(23,"label",15),t.EFF(24,"Status"),t.k0s(),t.j41(25,"select",18),t.bIt("change",function(c){return i.onStatusChange(c.target.value)}),t.j41(26,"option",19),t.EFF(27,"Todos"),t.k0s(),t.j41(28,"option",20),t.EFF(29,"Ativo"),t.k0s(),t.j41(30,"option",21),t.EFF(31,"Inativo"),t.k0s()()(),t.j41(32,"div",22)(33,"div",23),t.EFF(34),t.k0s()()()()(),t.j41(35,"div",24)(36,"div",25)(37,"table",26)(38,"thead",27)(39,"tr")(40,"th",28),t.EFF(41,"ID"),t.k0s(),t.j41(42,"th",29),t.EFF(43,"Nome tipo cart\xe3o"),t.k0s(),t.j41(44,"th",30),t.EFF(45,"A\xe7\xf5es"),t.k0s()()(),t.j41(46,"tbody"),t.DNE(47,v,11,2,"tr",31),t.DNE(48,F,3,0,"tr",32),t.DNE(49,b,3,0,"tr",32),t.DNE(50,g,3,1,"tr",32),t.k0s()()()(),t.DNE(51,T,1,1,"app-tipo-cartao-form",33),t.DNE(52,k,1,1,"app-tipo-cartao-form",33),t.k0s()),2&a&&(t.R7$(1),t.Y8G("ngIf",i.alert.message),t.R7$(20),t.Y8G("value",i.q),t.R7$(4),t.Y8G("value",i.statusFilter),t.R7$(9),t.Lme(" ",i.filtered.length," ",1===i.filtered.length?"tipo de cart\xe3o":"tipos de cart\xe3o"," "),t.R7$(13),t.Y8G("ngForOf",i.filtered),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.filtered.length),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",i.errorMsg),t.R7$(1),t.Y8G("ngIf",i.showModalCreate),t.R7$(1),t.Y8G("ngIf",i.showModalUpdate))},dependencies:[p.Sq,p.bT,n.xH,n.y7,C]})}}return e})()}];let E=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(y),u.iI]})}}return e})(),j=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[p.MD,n.X1,E]})}}return e})()}}]);