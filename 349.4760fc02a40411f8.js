"use strict";(self.webpackChunkmy_finance_front=self.webpackChunkmy_finance_front||[]).push([[349],{1349:(j,u,i)=>{i.r(u),i.d(u,{LoginModule:()=>E});var m=i(177),s=i(4341),c=i(9032),p=i(467),e=i(540),f=i(2218);let g=(()=>{class t{constructor(){this.closeModal=new e.bkB}close(){this.closeModal.emit()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-registro-usuario"]],outputs:{closeModal:"closeModal"},decls:16,vars:0,consts:[["tabindex","-1","role","dialog","aria-modal","true",1,"modal","modal-blur","fade","show","d-block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fechar",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-muted","mb-0"],[1,"modal-footer"],["type","button",1,"btn","me-auto",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e.EFF(5,"Registrar"),e.k0s(),e.j41(6,"button",5),e.bIt("click",function(){return o.close()}),e.k0s()(),e.j41(7,"div",6)(8,"p",7),e.EFF(9,"Aqui voc\xea coloca seu formul\xe1rio de cadastro."),e.k0s()(),e.j41(10,"div",8)(11,"button",9),e.bIt("click",function(){return o.close()}),e.EFF(12,"Cancelar"),e.k0s(),e.j41(13,"button",10),e.bIt("click",function(){return o.close()}),e.EFF(14,"Salvar"),e.k0s()()()()(),e.j41(15,"div",11),e.bIt("click",function(){return o.close()}),e.k0s())},styles:[".modal-backdrop-custom[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1050}.modal-custom[_ngcontent-%COMP%]{position:fixed;inset:0;display:grid;place-items:center;z-index:1060;padding:16px}.modal-card[_ngcontent-%COMP%]{width:100%;max-width:520px;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 20px 50px #00000040}.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;justify-content:space-between}.modal-body[_ngcontent-%COMP%]{padding:16px}"]})}}return t})();function b(t,l){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.errors.username," ")}}function h(t,l){1&t&&(e.j41(0,"span"),e.EFF(1,"\u{1f441}\ufe0f"),e.k0s())}function k(t,l){1&t&&(e.j41(0,"span"),e.EFF(1,"\u{1f648}"),e.k0s())}function v(t,l){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.errors.password," ")}}function _(t,l){1&t&&(e.qex(0),e.nrm(1,"span",32),e.EFF(2," Carregando... "),e.bVm())}function C(t,l){1&t&&e.EFF(0,"Entrar")}function w(t,l){if(1&t){const n=e.RV6();e.j41(0,"app-registro-usuario",33),e.bIt("closeModal",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.closeRegister())}),e.k0s()}}const F=[{path:"",component:(()=>{class t{constructor(n,r,o){this.fb=n,this.auth=r,this.router=o,this.showPwd=!1,this.loading=!1,this.showModalCreate=!1,this.form=this.fb.group({username:["",[s.k0.minLength(3)]],password:["",[s.k0.minLength(4)]],remember:[!0]})}get errors(){const n=this.form.controls.username.value??"",r=this.form.controls.password.value??"";return{username:n&&n.length<3?"Informe seu e-mail ou usu\xe1rio.":"",password:r&&r.length<4?"A senha deve ter pelo menos 4 caracteres.":""}}togglePwd(){this.showPwd=!this.showPwd}openRegister(){this.showModalCreate=!0}closeRegister(){this.showModalCreate=!1}submit(){var n=this;return(0,p.A)(function*(){const r=n.errors;if(r.username||r.password)alert("Corrija os erros antes de continuar.");else try{n.loading=!0;const o=n.form.controls.username.value??"",a=n.form.controls.password.value??"",d=!!n.form.controls.remember.value;(yield n.auth.authenticate(o,a,d))?yield n.router.navigate(["/home"],{replaceUrl:!0}):alert("Credenciais inv\xe1lidas.")}catch(o){console.error("Erro ao autenticar:",o),alert("N\xe3o foi poss\xedvel autenticar. Tente novamente.")}finally{n.loading=!1}})()}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(f.u),e.rXU(c.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:41,vars:15,consts:[[1,"page","page-center"],[1,"container","container-tight","py-4"],[1,"text-center","mb-4"],["href",".",1,"navbar-brand","navbar-brand-autodark"],[1,"card","card-md"],[1,"card-body"],[1,"h2","text-center","mb-4"],["autocomplete","on","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["id","username","type","text","placeholder","voce@email.com","formControlName","username","autofocus","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"mb-2"],["for","password",1,"form-label"],[1,"input-group","input-group-flat"],["id","password","placeholder","Sua senha","formControlName","password","autocomplete","current-password",1,"form-control",3,"type"],[1,"input-group-text"],["href","#","title","Mostrar/ocultar senha",1,"link-secondary",3,"click"],[4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","remember",1,"form-check-input"],[1,"form-check-label"],[1,"form-footer"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[4,"ngIf","ngIfElse"],["btnText",""],[1,"hr-text"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[3,"closeModal",4,"ngIf"],[1,"invalid-feedback"],[1,"invalid-feedback","d-block"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[3,"closeModal"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),e.EFF(4," MyFinance "),e.k0s()(),e.j41(5,"div",4)(6,"div",5)(7,"h2",6),e.EFF(8,"Entrar"),e.k0s(),e.j41(9,"form",7),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(10,"div",8)(11,"label",9),e.EFF(12,"E-mail ou usu\xe1rio"),e.k0s(),e.nrm(13,"input",10),e.DNE(14,b,2,1,"div",11),e.k0s(),e.j41(15,"div",12)(16,"label",13),e.EFF(17,"Senha"),e.k0s(),e.j41(18,"div",14),e.nrm(19,"input",15),e.j41(20,"span",16)(21,"a",17),e.bIt("click",function(d){return d.preventDefault(),o.togglePwd()}),e.DNE(22,h,2,0,"span",18),e.DNE(23,k,2,0,"span",18),e.k0s()()(),e.DNE(24,v,2,1,"div",19),e.k0s(),e.j41(25,"div",12)(26,"label",20),e.nrm(27,"input",21),e.j41(28,"span",22),e.EFF(29,"Lembrar de mim"),e.k0s()()(),e.j41(30,"div",23)(31,"button",24),e.DNE(32,_,3,0,"ng-container",25),e.DNE(33,C,1,0,"ng-template",null,26,e.C5r),e.k0s()()()(),e.j41(35,"div",27),e.EFF(36,"ou"),e.k0s(),e.j41(37,"div",5)(38,"button",28),e.bIt("click",function(){return o.openRegister()}),e.EFF(39," Registrar-se "),e.k0s()()()(),e.DNE(40,w,1,0,"app-registro-usuario",29),e.k0s()),2&r){const a=e.sdS(34);e.R7$(9),e.Y8G("formGroup",o.form),e.R7$(4),e.AVh("is-invalid",!!o.errors.username),e.R7$(1),e.Y8G("ngIf",o.errors.username),e.R7$(5),e.AVh("is-invalid",!!o.errors.password),e.Y8G("type",o.showPwd?"text":"password"),e.R7$(2),e.BMQ("aria-label",o.showPwd?"Ocultar senha":"Mostrar senha"),e.R7$(1),e.Y8G("ngIf",!o.showPwd),e.R7$(1),e.Y8G("ngIf",o.showPwd),e.R7$(1),e.Y8G("ngIf",o.errors.password),e.R7$(7),e.Y8G("disabled",o.loading),e.R7$(1),e.Y8G("ngIf",o.loading)("ngIfElse",a),e.R7$(8),e.Y8G("ngIf",o.showModalCreate)}},dependencies:[m.bT,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD,g],styles:[".icon-btn[_ngcontent-%COMP%]{line-height:1;cursor:pointer;-webkit-user-select:none;user-select:none}"]})}}return t})()}];let y=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(F),c.iI]})}}return t})(),E=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[m.MD,s.X1,y]})}}return t})()}}]);